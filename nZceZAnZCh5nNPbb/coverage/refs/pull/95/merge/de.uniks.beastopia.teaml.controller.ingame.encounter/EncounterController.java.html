<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EncounterController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">stp-23-team-lumnix</a> &gt; <a href="index.source.html" class="el_package">de.uniks.beastopia.teaml.controller.ingame.encounter</a> &gt; <span class="el_source">EncounterController.java</span></div><h1>EncounterController.java</h1><pre class="source lang-java linenums">package de.uniks.beastopia.teaml.controller.ingame.encounter;

import de.uniks.beastopia.teaml.controller.Controller;
import de.uniks.beastopia.teaml.rest.Monster;
import de.uniks.beastopia.teaml.rest.Trainer;
import de.uniks.beastopia.teaml.service.DataCache;
import de.uniks.beastopia.teaml.service.PresetsService;
import de.uniks.beastopia.teaml.service.TrainerService;
import de.uniks.beastopia.teaml.utils.Prefs;
import javafx.fxml.FXML;
import javafx.scene.Parent;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextArea;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.VBox;

import javax.inject.Inject;
import javax.inject.Provider;
import java.util.ArrayList;
import java.util.List;

@SuppressWarnings(&quot;unused&quot;)
public class EncounterController extends Controller {

    @FXML
    VBox attackBox1;
    @FXML
    VBox attackBox2;
    @FXML
    VBox attackBox3;
    @FXML
    VBox attackBox4;
    @FXML
    VBox enemyBeastInfo;
    @FXML
    Button leaveEncounter;
    @FXML
    Button changeMonster;
    @FXML
    VBox actionInfoBox;
    @FXML
    TextArea actionInfoText;
    @FXML
    VBox beastInfoBox;
    @FXML
    HBox enemyMonstersBox;
    @FXML
    HBox ownMonstersBox;
    @FXML
    Label attackNameLabel1;
    @FXML
    Label attackTypeLabel1;
    @FXML
    Label accLabel1;
    @FXML
    Label powerLabel1;
    @FXML
    Label attackNameLabel2;
    @FXML
    Label attackTypeLabel2;
    @FXML
    Label accLabel2;
    @FXML
    Label powerLabel2;
    @FXML
    Label attackNameLabel3;
    @FXML
    Label attackTypeLabel3;
    @FXML
    Label accLabel3;
    @FXML
    Label powerLabel3;
    @FXML
    Label attackNameLabel4;
    @FXML
    Label attackTypeLabel4;
    @FXML
    Label accLabel4;
    @FXML
    Label powerLabel4;

    @Inject
    Provider&lt;EnemyBeastInfoController&gt; enemyBeastInfoControllerProvider;
    @Inject
    Provider&lt;BeastInfoController&gt; beastInfoControllerProvider;
    @Inject
    Provider&lt;RenderBeastController&gt; renderBeastControllerProvider;
    @Inject
    DataCache cache;
    @Inject
    TrainerService trainerService;
    @Inject
    PresetsService presetsService;
    @Inject
    Prefs prefs;

    //monster on the substitute's bench
<span class="nc" id="L100">    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)</span>
    private List&lt;Monster&gt; ownMonsters = new ArrayList&lt;&gt;();
<span class="nc" id="L102">    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)</span>
    private List&lt;Monster&gt; allyMonsters = new ArrayList&lt;&gt;();
<span class="nc" id="L104">    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)</span>
    private List&lt;Monster&gt; enemyMonsters = new ArrayList&lt;&gt;();
<span class="nc" id="L106">    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)</span>
    private List&lt;Monster&gt; enemyAllyMonsters = new ArrayList&lt;&gt;();

    //monsters in the fight
    private Monster ownMonster;
    private Monster allyMonster;
    private Monster enemyMonster;
    private Monster enemyAllyMonster;

    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)
    private Trainer allyTrainer;
    @SuppressWarnings({&quot;unused&quot;, &quot;FieldCanBeLocal&quot;})
    private Trainer enemyTrainer;
    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)
    private Trainer enemyAllyTrainer;

    EnemyBeastInfoController enemyBeastInfoController1;
    EnemyBeastInfoController enemyBeastInfoController2;
    RenderBeastController renderBeastController1;
    RenderBeastController renderBeastController2;
    BeastInfoController beastInfoController1;
    BeastInfoController beastInfoController2;

    /*Trainer trainer = new Trainer(null, null, &quot;1&quot;, &quot;1&quot;, &quot;user&quot;, &quot;name&quot;, null, null,
            1, null, 1, 1, 1, null);
    Monster monster1 = new Monster(null, null,
            &quot;1&quot;, &quot;1&quot;, 3, 1, 0, new MonsterAttributes(100, 100, 100, 100),
            new MonsterAttributes(20, 10, 10, 5), Map.ofEntries(Map.entry(&quot;test1&quot;, 1), Map.entry(&quot;test2&quot;, 2), Map.entry(&quot;test3&quot;, 3)));
    Monster monster2 = new Monster(null, null,
            &quot;1&quot;, &quot;1&quot;, 1, 1, 0, new MonsterAttributes(100, 100, 100, 100),
            new MonsterAttributes(20, 10, 10, 5), Map.ofEntries(Map.entry(&quot;1&quot;, 1), Map.entry(&quot;2&quot;, 2)));
    Monster monster3 = new Monster(null, null,
            &quot;1&quot;, &quot;1&quot;, 2, 1, 0, new MonsterAttributes(100, 100, 100, 100),
            new MonsterAttributes(20, 10, 10, 5), Map.ofEntries(Map.entry(&quot;1&quot;, 1)));
    Monster monster4 = new Monster(null, null,
            &quot;1&quot;, &quot;1&quot;, 4, 1, 0, new MonsterAttributes(100, 100, 100, 100),
            new MonsterAttributes(20, 10, 10, 5), Map.ofEntries(Map.entry(&quot;1&quot;, 1), Map.entry(&quot;2&quot;, 2), Map.entry(&quot;3&quot;, 3)));*/


    @Inject
<span class="nc" id="L146">    public EncounterController() {</span>
<span class="nc" id="L147">    }</span>

    @Override
    public void init() {
<span class="nc" id="L151">        super.init();</span>
        /*setOwnMonster(monster1);
        setAllyMonster(monster2);
        setEnemyMonster(monster3);
        setEnemyAllyMonster(monster4);*/
<span class="nc" id="L156">    }</span>

    @Override
    public void onResize(int width, int height) {
<span class="nc bnc" id="L160" title="All 2 branches missed.">        if (renderBeastController1 != null)</span>
<span class="nc" id="L161">            renderBeastController1.onResize(width, height);</span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">        if (renderBeastController2 != null)</span>
<span class="nc" id="L163">            renderBeastController2.onResize(width, height);</span>
<span class="nc" id="L164">    }</span>

    @Override
    public Parent render() {
<span class="nc" id="L168">        Parent parent = super.render();</span>

<span class="nc" id="L170">        beastInfoController1 = beastInfoControllerProvider.get().setMonster(ownMonster);</span>
<span class="nc" id="L171">        beastInfoBox.getChildren().addAll(beastInfoController1.render());</span>
<span class="nc" id="L172">        renderBeastController1 = renderBeastControllerProvider.get().setMonster1(ownMonster);</span>
<span class="nc" id="L173">        Parent ownMonster = renderBeastController1.render();</span>
<span class="nc" id="L174">        ownMonstersBox.getChildren().addAll(ownMonster);</span>
<span class="nc" id="L175">        HBox.setHgrow(ownMonster, Priority.ALWAYS);</span>

<span class="nc bnc" id="L177" title="All 2 branches missed.">        if (allyMonster != null) {</span>
<span class="nc" id="L178">            beastInfoController2 = beastInfoControllerProvider.get().setMonster(allyMonster);</span>
<span class="nc" id="L179">            beastInfoBox.getChildren().addAll(beastInfoController2.render());</span>
<span class="nc" id="L180">            renderBeastController1.setMonster2(allyMonster);</span>
<span class="nc" id="L181">            ownMonstersBox.getChildren().clear();</span>
<span class="nc" id="L182">            Parent allyMonster = renderBeastController1.render();</span>
<span class="nc" id="L183">            ownMonstersBox.getChildren().addAll(allyMonster);</span>
<span class="nc" id="L184">            HBox.setHgrow(allyMonster, Priority.ALWAYS);</span>
        }

<span class="nc" id="L187">        enemyBeastInfoController1 = enemyBeastInfoControllerProvider.get().setMonster(enemyMonster);</span>
<span class="nc" id="L188">        enemyBeastInfo.getChildren().addAll(enemyBeastInfoController1.render());</span>
<span class="nc" id="L189">        renderBeastController2 = renderBeastControllerProvider.get().setMonster1(enemyMonster);</span>
<span class="nc" id="L190">        Parent enemyMonster = renderBeastController2.render();</span>
<span class="nc" id="L191">        enemyMonstersBox.getChildren().addAll(enemyMonster);</span>
<span class="nc" id="L192">        HBox.setHgrow(enemyMonster, Priority.ALWAYS);</span>

<span class="nc bnc" id="L194" title="All 2 branches missed.">        if (enemyAllyMonster != null) {</span>
<span class="nc" id="L195">            enemyBeastInfoController2 = enemyBeastInfoControllerProvider.get().setMonster(enemyAllyMonster);</span>
<span class="nc" id="L196">            enemyBeastInfo.getChildren().addAll(enemyBeastInfoController2.render());</span>
<span class="nc" id="L197">            renderBeastController2.setMonster2(enemyAllyMonster);</span>
<span class="nc" id="L198">            enemyMonstersBox.getChildren().clear();</span>
<span class="nc" id="L199">            Parent enemyAlly = renderBeastController2.render();</span>
<span class="nc" id="L200">            enemyMonstersBox.getChildren().addAll(enemyAlly);</span>
<span class="nc" id="L201">            HBox.setHgrow(enemyAlly, Priority.ALWAYS);</span>
        }

<span class="nc" id="L204">        setNumberOfAttacks();</span>

        // set label informations

<span class="nc" id="L208">        return parent;</span>
    }

    private void setNumberOfAttacks() {
        //get no of possible attacks
<span class="nc" id="L213">        System.out.println(&quot;no of attacks: &quot; + ownMonster.abilities().size());</span>
<span class="nc bnc" id="L214" title="All 2 branches missed.">        if (ownMonster.abilities().size() == 1) {</span>
<span class="nc" id="L215">            attackBox2.setVisible(false);</span>
<span class="nc" id="L216">            attackBox3.setVisible(false);</span>
<span class="nc" id="L217">            attackBox4.setVisible(false);</span>
<span class="nc bnc" id="L218" title="All 2 branches missed.">        } else if (ownMonster.abilities().size() == 2) {</span>
<span class="nc" id="L219">            attackBox3.setVisible(false);</span>
<span class="nc" id="L220">            attackBox4.setVisible(false);</span>
<span class="nc bnc" id="L221" title="All 2 branches missed.">        } else if (ownMonster.abilities().size() == 3) {</span>
<span class="nc" id="L222">            attackBox4.setVisible(false);</span>
        }

<span class="nc" id="L225">    }</span>

    //onClicked leave encounter button
    private void leaveEncounter() {
        //TODO: switch screen to map
<span class="nc" id="L230">        System.out.println(&quot;leave encounter&quot;);</span>
<span class="nc" id="L231">    }</span>

    //onClicked change monster button
    private void changeMonster() {
        //TODO: switch screen to monster selection
<span class="nc" id="L236">        System.out.println(&quot;change monster&quot;);</span>
<span class="nc" id="L237">    }</span>

    //setter methods for monsters
    public void setOwnMonster(Monster ownMonster) {
<span class="nc" id="L241">        this.ownMonster = ownMonster;</span>
<span class="nc" id="L242">    }</span>

    public void setAllyMonster(Monster allyMonster) {
<span class="nc" id="L245">        this.allyMonster = allyMonster;</span>
<span class="nc" id="L246">    }</span>

    public void setEnemyMonster(Monster enemyMonster) {
<span class="nc" id="L249">        this.enemyMonster = enemyMonster;</span>
<span class="nc" id="L250">    }</span>

    public void setEnemyAllyMonster(Monster enemyAllyMonster) {
<span class="nc" id="L253">        this.enemyAllyMonster = enemyAllyMonster;</span>
<span class="nc" id="L254">    }</span>

    public void setAllyTrainer(Trainer allyTrainer) {
<span class="nc" id="L257">        this.allyTrainer = allyTrainer;</span>
<span class="nc" id="L258">    }</span>

    public void setEnemyTrainer(Trainer enemyTrainer) {
<span class="nc" id="L261">        this.enemyTrainer = enemyTrainer;</span>
<span class="nc" id="L262">    }</span>

    public void setEnemyAllyTrainer(Trainer enemyAllyTrainer) {
<span class="nc" id="L265">        this.enemyAllyTrainer = enemyAllyTrainer;</span>
<span class="nc" id="L266">    }</span>

    @Override
    public String getTitle() {
<span class="nc" id="L270">        return resources.getString(&quot;titleEncounter&quot;);</span>
    }

    //methods for attack buttons
    private void executeAttack1() {
<span class="nc" id="L275">        System.out.println(&quot;attack1&quot;);</span>
<span class="nc" id="L276">    }</span>

    private void executeAttack2() {
<span class="nc" id="L279">        System.out.println(&quot;attack2&quot;);</span>
<span class="nc" id="L280">    }</span>

    private void executeAttack3() {
<span class="nc" id="L283">        System.out.println(&quot;attack3&quot;);</span>
<span class="nc" id="L284">    }</span>

    private void executeAttack4() {
<span class="nc" id="L287">        System.out.println(&quot;attack4&quot;);</span>
<span class="nc" id="L288">    }</span>

    //methods for setting labels in attack boxes
    private void setAttackNameLabel1(String value) {
<span class="nc" id="L292">        attackNameLabel1.setText(value);</span>
<span class="nc" id="L293">    }</span>

    private void setAttackTypeLabel1(String value) {
<span class="nc" id="L296">        attackTypeLabel1.setText(value);</span>
<span class="nc" id="L297">    }</span>

    private void setAccLabel1(String value) {
<span class="nc" id="L300">        accLabel1.setText(value);</span>
<span class="nc" id="L301">    }</span>

    private void setPowerLabel1(String value) {
<span class="nc" id="L304">        powerLabel1.setText(value);</span>
<span class="nc" id="L305">    }</span>

    private void setAttackNameLabel2(String value) {
<span class="nc" id="L308">        attackNameLabel2.setText(value);</span>
<span class="nc" id="L309">    }</span>

    private void setAttackTypeLabel2(String value) {
<span class="nc" id="L312">        attackTypeLabel2.setText(value);</span>
<span class="nc" id="L313">    }</span>

    private void setAccLabel2(String value) {
<span class="nc" id="L316">        accLabel2.setText(value);</span>
<span class="nc" id="L317">    }</span>

    private void setPowerLabel2(String value) {
<span class="nc" id="L320">        powerLabel2.setText(value);</span>
<span class="nc" id="L321">    }</span>

    private void setAttackNameLabel3(String value) {
<span class="nc" id="L324">        attackNameLabel3.setText(value);</span>
<span class="nc" id="L325">    }</span>

    private void setAttackTypeLabel3(String value) {
<span class="nc" id="L328">        attackTypeLabel3.setText(value);</span>
<span class="nc" id="L329">    }</span>

    private void setAccLabel3(String value) {
<span class="nc" id="L332">        accLabel3.setText(value);</span>
<span class="nc" id="L333">    }</span>

    private void setPowerLabel3(String value) {
<span class="nc" id="L336">        powerLabel3.setText(value);</span>
<span class="nc" id="L337">    }</span>

    private void setAttackNameLabel4(String value) {
<span class="nc" id="L340">        attackNameLabel4.setText(value);</span>
<span class="nc" id="L341">    }</span>

    private void setAttackTypeLabel4(String value) {
<span class="nc" id="L344">        attackTypeLabel4.setText(value);</span>
<span class="nc" id="L345">    }</span>

    private void setAccLabel4(String value) {
<span class="nc" id="L348">        accLabel4.setText(value);</span>
<span class="nc" id="L349">    }</span>

    private void setPowerLabel4(String value) {
<span class="nc" id="L352">        powerLabel4.setText(value);</span>
<span class="nc" id="L353">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>